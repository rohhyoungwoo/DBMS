-- 1. FK 관계 맺은 테이블 수정/삭제

CREATE TABLE TBL_PHONE(
	PHONE_NUMBER VARCHAR2(100),
	PHONE_COLOR VARCHAR2(100),
	PHONE_SIZE NUMBER,
	PHONE_PRICE NUMBER,
	PHONE_SALE NUMBER,
	PHONE_PRODUCTION_DATE DATE,
	CONSTRAINT PK_PHONE PRIMARY KEY(PHONE_NUMBER)
);

CREATE TABLE TBL_CASE(
	CASE_NUMBER VARCHAR2(100),
	CASE_COLOR VARCHAR2(100),
	CASE_PRICE NUMBER,
	PHONE_NUMBER VARCHAR2(100),
	CONSTRAINT PK_CASE PRIMARY KEY(CASE_NUMBER),
	CONSTRAINT FK_CASE FOREIGN KEY(PHONE_NUMBER) REFERENCES TBL_PHONE(PHONE_NUMBER)
);

SELECT * FROM TBL_PHONE;
SELECT * FROM TBL_CASE;

-- 관계를 맺은 테이블들의 DML
-- 자식테이블은 부모테이블의 값을 참조하기 때문에 항상 부모테이블에 DATA가 먼저 들어가야한다
-- PHONE 테이블이 부모이므로 PHONE에 먼저 데이터를 넣어야한다

INSERT INTO TBL_PHONE
VALUES('a1', 'white', 1, 100, 0,'2024-12-01');
--DATE 타입의 컬럼에 문자타입의 값을 'YYYY-MM-DD' 형태로 넣으면 자동으로 DATE타입으로 변환되어 들어간다

INSERT INTO TBL_PHONE
VALUES('a2', 'black', 1, 120, 10, sysdate - 10);
-- 현재 날짜를 기준으로 10일 전 현재시간까지 포함해서 들어간다

INSERT INTO TBL_PHONE
VALUES('a3', 'black', 1, 130, 20, TO_DATE('2024-05-05'));
-- TO_DATE()함수를 이용하여 문자열을 직접 DATE 타입으로 바꿀 수 있따

INSERT INTO TBL_CASE
--VALUES('A', 'WHITE', 5, 'A1'); -- PHONE 테이블에는 A1값이 없기 때문에(데이터 값은 대소문자 구분) 오류발생
VALUES('A', 'WHITE', 5, 'a1');




